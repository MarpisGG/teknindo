import{K as N,r as c,j as e,a as w}from"./app-C-sY5DTH.js";import{S as b}from"./sweetalert2.esm.all-BQIkj5Wb.js";const k=()=>{const{type:l}=N().props,[r,o]=c.useState({...l,image:null}),[i,p]=c.useState({}),[d,g]=c.useState(!1),[x,m]=c.useState(null);c.useEffect(()=>{l.image&&typeof l.image=="string"&&m(`/storage/${l.image}`)},[l.image]);const u=s=>{const{name:t,value:a}=s.target;o(n=>({...n,[t]:a}))},y=s=>{s.preventDefault();const t=s.dataTransfer.files[0];t&&t.type.startsWith("image/")&&(o(a=>({...a,image:t})),m(URL.createObjectURL(t)))},j=s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];t&&(o(n=>({...n,image:t})),m(URL.createObjectURL(t)))},h=()=>{window.location.href="/admin/types"},v=s=>{s.preventDefault(),g(!0),p({});const t=new FormData;t.append("name",r.name??""),t.append("description",r.description??""),r.image instanceof File&&t.append("image",r.image),w.post(`/types/${r.id}?_method=PUT`,t).then(()=>{b.fire("Success","Type updated successfully.","success"),window.location.href="/admin/types"}).catch(a=>{var n,f;(f=(n=a.response)==null?void 0:n.data)!=null&&f.errors?p(a.response.data.errors):b.fire("Error","An error occurred while updating the type.","error")}).finally(()=>{g(!1)})};return e.jsx("div",{className:"flex min-h-screen flex-col items-center bg-gray-100 px-4 py-10",children:e.jsxs("div",{className:"w-full max-w-2xl p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Type"}),e.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:underline",children:"â† Back to Types"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"mb-1 block font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:u,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring focus:ring-blue-200"}),i.name&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"mb-1 block font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:u,className:"w-full rounded-lg border border-gray-300 px-3 py-2 focus:ring focus:ring-blue-200"}),i.description&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:i.description})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:"mb-1 block font-medium text-gray-700",children:"Image"}),e.jsxs("div",{onDragOver:s=>s.preventDefault(),onDrop:y,onClick:()=>{var s;return(s=document.getElementById("image-input"))==null?void 0:s.click()},className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",children:[e.jsx("input",{id:"image-input",type:"file",accept:"image/*",onChange:j,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop image here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),x&&e.jsx("img",{src:x,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),i.image&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:i.image})]}),e.jsxs("div",{className:"flex justify-start space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:h,className:"rounded-md bg-gray-300 px-4 py-2 text-gray-800 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 ${d?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} rounded-md text-white`,children:d?"Updating...":"Update Type"})]})]})]})})};export{k as default};

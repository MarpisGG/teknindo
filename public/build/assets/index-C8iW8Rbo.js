import{r as l,a as f,j as e,$ as n,S as j}from"./app-DpQSXoYx.js";import{S as c}from"./sweetalert2.esm.all-BQIkj5Wb.js";import g from"./navbar-admin-D5J3jOLF.js";const v=()=>{const[x,o]=l.useState([]),[i,h]=l.useState(""),m=((s,t)=>{const[r,a]=l.useState(s);return l.useEffect(()=>{const b=setTimeout(()=>{a(s)},t);return()=>clearTimeout(b)},[s,t]),r})(i,500);l.useEffect(()=>{f.get("/api/roles").then(s=>{o(s.data)})},[]);const u=s=>{h(s.target.value)},p=s=>{c.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(t=>{t.isConfirmed&&j.delete(`/roles/${s}`,{onSuccess:()=>{c.fire("Deleted!","Role has been deleted.","success"),o(r=>r.filter(a=>a.id!==s))},onError:()=>{c.fire("Error!","There was an error deleting the role.","error")}})})},d=x.filter(s=>s.name.toLowerCase().includes(m.toLowerCase()));return e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsx(g,{}),e.jsxs("div",{className:"mb-6 flex flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Role Management"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row",children:[e.jsx("input",{type:"text",placeholder:"Search roles...",value:i,onChange:u,className:"w-full rounded border border-gray-300 px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none sm:w-64"}),e.jsx(n,{href:"/admin/dashboard",className:"rounded-lg border border-blue-600 px-4 py-2 text-center text-sm text-blue-600 hover:text-blue-800 sm:text-base",children:"← Back to Dashboard"}),e.jsx(n,{href:"/admin/roles/create",className:"rounded bg-blue-600 px-4 py-2 text-center text-white hover:bg-blue-700",children:"+ Create Role"})]})]}),e.jsxs("div",{className:"overflow-x-auto rounded bg-white shadow",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("div",{className:"flex flex-wrap justify-between gap-4",children:[e.jsx("p",{children:"List : Melihat Data"}),e.jsx("p",{children:"Create : Membuat Data"}),e.jsx("p",{children:"Edit : Mengubah Data"}),e.jsx("p",{children:"Delete : Menghapus data"})]})}),e.jsxs("table",{className:"w-full text-left text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Name"}),e.jsx("th",{className:"px-4 py-3",children:"Permissions"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:d.length>0?d.map(s=>{var t;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-2 font-medium",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:((t=s.permissions)==null?void 0:t.length)>0?e.jsx("ul",{className:"list-inside list-disc space-y-1",children:s.permissions.map((r,a)=>e.jsx("li",{children:r.name},a))}):e.jsx("span",{className:"text-gray-400 italic",children:"No permissions"})}),e.jsxs("td",{className:"space-x-2 px-4 py-2 text-center whitespace-nowrap",children:[e.jsx(n,{href:`/admin/roles/${s.id}/edit`,className:"inline-block rounded bg-yellow-400 px-3 py-1 text-white hover:bg-yellow-500",children:"Edit"}),e.jsx("button",{onClick:()=>p(s.id),className:"inline-block rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Delete"})]})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"p-6 text-center text-gray-500",children:"No roles found."})})})]})]})]})};export{v as default};

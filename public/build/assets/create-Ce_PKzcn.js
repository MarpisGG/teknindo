import{r as l,j as e,a as j,S as v}from"./app-XeaLuqRD.js";import{R as N}from"./index-D5EtP6J7.js";import{S as h}from"./sweetalert2.esm.all-BQIkj5Wb.js";const R=()=>{const[t,c]=l.useState({id:0,name:"",image:"",description:"",web:""}),[n,d]=l.useState({}),[m,p]=l.useState(!1),[x,u]=l.useState(null),[w,y]=l.useState(null),[C,S]=l.useState(null),g=a=>{const{name:s,value:r}=a.target;c(i=>({...i,[s]:r}))},f=a=>{const{name:s,files:r}=a.target;if(r&&r.length>0){const i=r[0];c(o=>({...o,[s]:i})),s==="image"&&u(URL.createObjectURL(i))}},b=async a=>{var r,i;a.preventDefault(),p(!0),d({});const s=new FormData;s.append("name",t.name),s.append("description",t.description),s.append("web",t.web),t.image&&s.append("image",t.image),t.image&&s.append("image",t.image);try{await j.post("/admin/companies",s),h.fire("Success","Company created successfully","success"),v.get("/admin/companies")}catch(o){(i=(r=o.response)==null?void 0:r.data)!=null&&i.errors?d(o.response.data.errors):h.fire("Error","Something went wrong","error")}finally{p(!1)}};return e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Create Company"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:g,className:"w-full rounded border px-4 py-2"}),n.name&&e.jsx("div",{className:"text-sm text-red-600",children:n.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Description"}),e.jsx(N,{value:t.description,onChange:a=>c(s=>({...s,description:a})),className:"bg-white"}),n.description&&e.jsx("div",{className:"text-sm text-red-600",children:n.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Link"}),e.jsx("input",{type:"text",name:"web",value:t.web,onChange:g,className:"w-full rounded border px-4 py-2"}),n.web&&e.jsx("div",{className:"text-sm text-red-600",children:n.web})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Image"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var a;return(a=document.getElementById("image-input"))==null?void 0:a.click()},onDragOver:a=>{a.preventDefault()},onDrop:a=>{if(a.preventDefault(),a.dataTransfer.files.length>0){const s=a.dataTransfer.files[0];c(r=>({...r,image:s})),u(URL.createObjectURL(s))}},children:[e.jsx("input",{id:"image-input",type:"file",name:"image",accept:"image/*",onChange:f,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop an image here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),x&&e.jsx("img",{src:x,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),n.image&&e.jsx("div",{className:"text-sm text-red-600",children:n.image})]}),e.jsx("div",{className:"flex justify-start space-x-3 pt-4",children:e.jsx("button",{type:"submit",disabled:m,className:`px-4 py-2 ${m?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} rounded-md text-white`,children:m?"Creating...":"Create Customer"})})]})]})};export{R as default};

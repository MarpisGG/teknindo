import{U as c,K as y,j as e,$ as n,a as x}from"./app-smKzdhJD.js";import{S as o}from"./sweetalert2.esm.all-BQIkj5Wb.js";import N from"./navbar-admin-D66avzRZ.js";const S=()=>{const[h,m]=c.useState(""),{products:t,flash:w,auth:v}=y().props,p=(t==null?void 0:t.data)||[],d=(r,a)=>{x.patch(`/admin/products/${r}/move`,{direction:a}).then(()=>{window.location.reload()}).catch(()=>{o.fire("Error!","Failed to move the product.","error")})},u=r=>{o.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&x.delete(`/products/${r}`).then(()=>{o.fire("Deleted!","The product has been deleted.","success"),window.location.reload()}).catch(s=>{o.fire("Error!","Failed to delete the product.","error"),console.error(s)})})},b=(r,a)=>{const[s,l]=c.useState(r);return c.useEffect(()=>{const j=setTimeout(()=>l(r),a);return()=>clearTimeout(j)},[r,a]),s},g=r=>{m(r.target.value.toLowerCase())},f=b(h,300),i=p.filter(r=>r.name.toLowerCase().includes(f));return e.jsxs("div",{className:"mx-auto max-w-6xl p-4 sm:p-6",children:[e.jsx(N,{}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 md:text-3xl",children:"Product Management"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsx("input",{type:"text",onChange:g,placeholder:"Search products...",className:"w-full rounded-lg border border-black px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none sm:w-auto"}),e.jsx(n,{href:"/admin/dashboard",className:"rounded-lg border border-blue-600 px-4 py-2 text-center text-sm text-blue-600 hover:text-blue-800 sm:text-base",children:"← Back to Dashboard"}),e.jsx(n,{href:"/admin/products/create",className:"rounded-lg bg-blue-600 px-4 py-2 text-center text-sm text-white shadow hover:bg-blue-700 sm:text-base",children:"+ Create Product"})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b px-4 py-2",children:"Image"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Name"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Category"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Type"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Brochure"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Order"}),e.jsx("th",{className:"border-b px-4 py-2 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:i.length>0?i.map((r,a)=>{var s,l;return e.jsxs("tr",{className:a%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"border-b px-4 py-2",children:r.image?e.jsx("img",{src:`/storage/${r.image}`,alt:r.name,className:"h-16 w-16 rounded object-cover"}):e.jsx("span",{className:"text-gray-400",children:"No image"})}),e.jsx("td",{className:"border-b px-4 py-2",children:r.name}),e.jsx("td",{className:"border-b px-4 py-2",children:(s=r.category)==null?void 0:s.name}),e.jsx("td",{className:"border-b px-4 py-2",children:(l=r.type)==null?void 0:l.name}),e.jsx("td",{className:"max-w-xs truncate border-b px-4 py-2",children:r.brochure?e.jsx("a",{href:`/storage/${r.brochure}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Download Brochure"}):e.jsx("span",{className:"text-gray-400",children:"No brochure"})}),e.jsx("td",{className:"border-b px-4 py-2",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(r.id,"up"),className:"rounded bg-gray-200 p-1 text-xs hover:bg-gray-300",children:"▲"}),e.jsx("button",{onClick:()=>d(r.id,"down"),className:"rounded bg-gray-200 p-1 text-xs hover:bg-gray-300",children:"▼"})]})})}),e.jsxs("td",{className:"space-x-2 border-b px-4 py-2 text-center whitespace-nowrap",children:[e.jsx(n,{href:`/admin/products/${r.id}/edit`,className:"inline-block rounded bg-yellow-400 px-3 py-1 text-white hover:bg-yellow-500",children:"Edit"}),e.jsx(n,{href:`/admin/products/${r.slug}/`,className:"inline-block rounded bg-blue-400 px-3 py-1 text-white hover:bg-blue-500",children:"Show"}),e.jsx("button",{onClick:()=>u(r.id),className:"inline-block rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Delete"})]})]},r.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-gray-500",children:"No products found."})})})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("nav",{className:"inline-flex items-center gap-1 rounded-lg bg-gray-50 px-3 py-2 shadow",children:[e.jsx(n,{href:`/admin/products?page=${Math.max(1,t.current_page-1)}`,className:`rounded px-3 py-1 text-sm font-medium transition ${t.current_page===1?"pointer-events-none text-gray-400":"text-blue-600 hover:bg-blue-100"}`,"aria-disabled":t.current_page===1,children:"« Prev"}),Array.from({length:t.last_page},(r,a)=>{const s=a+1;return s===1||s===t.last_page||Math.abs(s-t.current_page)<=1?e.jsx(n,{href:`/admin/products?page=${s}`,className:`rounded px-3 py-1 text-sm font-medium transition ${t.current_page===s?"bg-blue-600 text-white":"text-gray-700 hover:bg-blue-100"}`,children:s},s):s===t.current_page-2&&s>1||s===t.current_page+2&&s<t.last_page?e.jsx("span",{className:"px-2 text-gray-400",children:"..."},s):null}),e.jsx(n,{href:`/admin/products?page=${Math.min(t.last_page,t.current_page+1)}`,className:`rounded px-3 py-1 text-sm font-medium transition ${t.current_page===t.last_page?"pointer-events-none text-gray-400":"text-blue-600 hover:bg-blue-100"}`,"aria-disabled":t.current_page===t.last_page,children:"Next »"})]})})]})};export{S as default};

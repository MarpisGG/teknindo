import{r as o,j as e,a as b,S as j}from"./app-urxCfeUy.js";import{S as f}from"./sweetalert2.esm.all-BQIkj5Wb.js";const N=()=>{const[i,l]=o.useState({id:0,image:""}),[m,d]=o.useState({}),[c,g]=o.useState(!1),[u,x]=o.useState(null),p=s=>{const{name:a,files:t}=s.target;if(t&&t.length>0){const r=t[0];l(n=>({...n,[a]:r})),a==="image"&&x(URL.createObjectURL(r))}},h=async s=>{var t,r;s.preventDefault(),g(!0),d({});const a=new FormData;i.image&&a.append("image",i.image),i.image&&a.append("image",i.image);try{await b.post("/admin/customers",a),f.fire("Success","Customer created successfully","success"),j.get("/admin/customers")}catch(n){(r=(t=n.response)==null?void 0:t.data)!=null&&r.errors?d(n.response.data.errors):f.fire("Error","Something went wrong","error")}finally{g(!1)}};return e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Create Customer"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Image"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var s;return(s=document.getElementById("image-input"))==null?void 0:s.click()},onDragOver:s=>{s.preventDefault()},onDrop:s=>{if(s.preventDefault(),s.dataTransfer.files.length>0){const a=s.dataTransfer.files[0];l(t=>({...t,image:a})),x(URL.createObjectURL(a))}},children:[e.jsx("input",{id:"image-input",type:"file",name:"image",accept:"image/*",onChange:p,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop an image here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),u&&e.jsx("img",{src:u,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),m.image&&e.jsx("div",{className:"text-sm text-red-600",children:m.image})]}),e.jsx("div",{className:"flex justify-start space-x-3 pt-4",children:e.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 ${c?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} rounded-md text-white`,children:c?"Creating...":"Create Customer"})})]})]})};export{N as default};

import{r as o,j as e,$ as n,a as h}from"./app-C-sY5DTH.js";import{S as d}from"./sweetalert2.esm.all-BQIkj5Wb.js";import j from"./navbar-admin-dqGNt7Gm.js";const k=()=>{const[b,m]=o.useState([]),[c,u]=o.useState(""),[r,p]=o.useState(1),[i,g]=o.useState(1),a=async(t=1)=>{try{const s=await h.get(`/api/blogs?page=${t}`);m(s.data.data),p(s.data.current_page),g(s.data.last_page)}catch(s){console.error(s)}};o.useEffect(()=>{a()},[]);const y=async t=>{var l;if((await d.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await h.delete(`/blogs/${t}`,{headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""}}),await d.fire("Deleted!","Blog has been deleted.","success"),a()}catch(f){console.error(f),await d.fire("Error!","Failed to delete blog.","error")}},x=b.filter(t=>t.title.toLowerCase().includes(c.toLowerCase()));return e.jsxs("div",{className:"mx-auto max-w-6xl p-4 sm:p-6",children:[e.jsx(j,{}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 md:text-3xl",children:"Blog Management"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row",children:[e.jsx("input",{type:"text",placeholder:"Search blogs...",value:c,onChange:t=>u(t.target.value),className:"w-full rounded-lg border border-black px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none sm:w-auto"}),e.jsx(n,{href:"/admin/dashboard",className:"rounded-lg border border-blue-600 px-4 py-2 text-center text-sm text-blue-600 hover:text-blue-800 sm:text-base",children:"← Back to Dashboard"}),e.jsx(n,{href:"/admin/blogs/create",className:"rounded-lg bg-blue-600 px-4 py-2 text-center text-sm text-white shadow hover:bg-blue-700 sm:text-base",children:"+ Create blog"})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b px-4 py-3",children:"Thumbnail"}),e.jsx("th",{className:"border-b px-4 py-3",children:"Title"}),e.jsx("th",{className:"border-b px-4 py-3",children:"Author"}),e.jsx("th",{className:"border-b px-4 py-3",children:"Likes"}),e.jsx("th",{className:"border-b px-4 py-3",children:"Views"}),e.jsx("th",{className:"border-b px-4 py-3",children:"Actions"})]})}),e.jsx("tbody",{children:x.length?x.map((t,s)=>{var l;return e.jsxs("tr",{className:s%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"border-b px-4 py-2",children:t.thumbnail?e.jsx("a",{href:`/storage/${t.thumbnail}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:`/storage/${t.thumbnail}`,alt:"thumbnail",className:"h-16 w-16 rounded object-cover"})}):e.jsx("span",{className:"text-gray-400 italic",children:"No image"})}),e.jsx("td",{className:"border-b px-4 py-2",children:t.title}),e.jsx("td",{className:"border-b px-4 py-2",children:((l=t.user)==null?void 0:l.name)??"-"}),e.jsx("td",{className:"border-b px-4 py-2",children:t.likes??0}),e.jsx("td",{className:"border-b px-4 py-2",children:t.views??0}),e.jsxs("td",{className:"space-x-2 border-b px-4 py-2 whitespace-nowrap",children:[e.jsx(n,{href:`/admin/blogs/${t.id}/edit`,className:"inline-block rounded bg-yellow-400 px-3 py-1 text-white hover:bg-yellow-500",children:"Edit"}),e.jsx(n,{href:`/admin/blogs/${t.slug}`,className:"inline-block rounded bg-blue-500 px-3 py-1 text-white hover:bg-blue-600",children:"Show"}),e.jsx("button",{onClick:()=>y(t.id),className:"inline-block rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Delete"})]})]},t.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-gray-500",children:"No blogs found."})})})]})}),e.jsxs("div",{className:"mt-4 flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>a(r-1),disabled:r===1,className:"rounded bg-gray-200 px-3 py-1 disabled:opacity-50",children:"Previous"}),Array.from({length:i},(t,s)=>e.jsx("button",{onClick:()=>a(s+1),className:`rounded px-3 py-1 ${r===s+1?"bg-blue-600 text-white":"bg-gray-200"}`,children:s+1},s)),e.jsx("button",{onClick:()=>a(r+1),disabled:r===i,className:"rounded bg-gray-200 px-3 py-1 disabled:opacity-50",children:"Next"})]})]})};export{k as default};

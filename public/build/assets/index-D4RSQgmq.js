import{K as y,U as l,j as e,$ as f,a as d}from"./app-dZT29Y8S.js";import{S as t}from"./sweetalert2.esm.all-BQIkj5Wb.js";import g from"./navbar-admin-CSjn3rqD.js";const v=()=>{const{quotations:c,auth:N}=y().props,[n,x]=l.useState(""),i=s=>{t.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&d.delete(`/admin/quotations/${s}`).then(()=>{t.fire("Deleted!","Your message has been deleted.","success"),window.location.reload()}).catch(a=>{t.fire("Error!",a.response.data.message,"error")})})},m=(s,r)=>{const[a,u]=l.useState(s);return l.useEffect(()=>{const j=setTimeout(()=>u(s),r);return()=>clearTimeout(j)},[s,r]),a},h=s=>{x(s.target.value.toLowerCase())},p=m(n,300),o=c.data.filter(s=>(s.message||"").toLowerCase().includes(p)),b=async s=>{try{const r=await d.put(`/quotations/${s}/follow-up`);window.location.reload()}catch{t.fire("Error","Failed to update follow-up status","error")}};return e.jsxs("div",{className:"mx-auto max-w-6xl p-4 sm:p-6",children:[e.jsx(g,{}),e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 md:text-3xl",children:"Quotation"}),e.jsxs("div",{className:"flex w-full flex-col gap-2 sm:w-auto sm:flex-row sm:items-center",children:[e.jsx("input",{type:"text",onChange:h,placeholder:"Search quotation...",className:"w-full rounded-lg border border-black px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none sm:w-auto"}),e.jsx(f,{href:"/admin/dashboard",className:"rounded-lg border border-blue-600 px-4 py-2 text-center text-sm text-blue-600 hover:text-blue-800 sm:text-base",children:"← Back to Dashboard"})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border bg-white shadow",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b px-4 py-2",children:"Name"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Email"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Phone"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Company"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Country"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Message"}),e.jsx("th",{className:"border-b px-4 py-2",children:"Product"}),e.jsx("th",{className:"border-b px-4 py-2 text-center",children:"Followed Up"}),e.jsx("th",{className:"border-b px-4 py-2 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:o.length>0?o.map((s,r)=>e.jsxs("tr",{className:r%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"border-b px-4 py-2",children:s.name}),e.jsx("td",{className:"border-b px-4 py-2",children:s.email}),e.jsx("td",{className:"border-b px-4 py-2",children:s.phone}),e.jsx("td",{className:"border-b px-4 py-2",children:s.company}),e.jsx("td",{className:"border-b px-4 py-2",children:s.country}),e.jsx("td",{className:"border-b px-4 py-2",children:s.message}),e.jsx("td",{className:"border-b px-4 py-2",children:s.product.name}),e.jsx("td",{className:"border-b px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>b(s.id),className:`rounded px-3 py-1 text-white ${s.followed_up?"bg-green-600":"bg-gray-400"}`,children:s.followed_up?"Done":"Mark as Done"})}),e.jsx("td",{className:"border-b px-4 py-2 text-center",children:e.jsx("button",{onClick:()=>i(s.id),className:"rounded bg-red-500 px-3 py-1 text-white hover:bg-red-600",children:"Delete"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-gray-500",children:"No messages found."})})})]})})]})};export{v as default};

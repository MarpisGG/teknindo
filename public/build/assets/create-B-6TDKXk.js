import{r as o,j as e,a as j,S as y}from"./app-DvoQObqN.js";import{S as f}from"./sweetalert2.esm.all-BQIkj5Wb.js";const N=()=>{const[i,l]=o.useState({id:0,image:""}),[m,d]=o.useState({}),[c,u]=o.useState(!1),[g,x]=o.useState(null),h=t=>{const{name:s,files:a}=t.target;if(a&&a.length>0){const r=a[0];l(n=>({...n,[s]:r})),s==="image"&&x(URL.createObjectURL(r))}},b=async t=>{var a,r;t.preventDefault(),u(!0),d({});const s=new FormData;i.image&&s.append("image",i.image),i.image&&s.append("image",i.image);try{await j.post("/admin/customers",s),f.fire("Success","Customer created successfully","success"),y.get("/admin/customers")}catch(n){(r=(a=n.response)==null?void 0:a.data)!=null&&r.errors?d(n.response.data.errors):f.fire("Error","Something went wrong","error")}finally{u(!1)}},p=()=>{window.location.href="/admin/customers"};return e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Create Customer"}),e.jsx("button",{onClick:p,className:"mb-6 text-sm text-blue-600 hover:underline",children:"← Back to Customer List"}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Image"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var t;return(t=document.getElementById("image-input"))==null?void 0:t.click()},onDragOver:t=>{t.preventDefault()},onDrop:t=>{if(t.preventDefault(),t.dataTransfer.files.length>0){const s=t.dataTransfer.files[0];l(a=>({...a,image:s})),x(URL.createObjectURL(s))}},children:[e.jsx("input",{id:"image-input",type:"file",name:"image",accept:"image/*",onChange:h,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop an image here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),g&&e.jsx("img",{src:g,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),m.image&&e.jsx("div",{className:"text-sm text-red-600",children:m.image})]}),e.jsxs("div",{className:"flex justify-start space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:p,className:"rounded-md bg-gray-300 px-4 py-2 text-gray-800 hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 ${c?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} rounded-md text-white`,children:c?"Creating...":"Create Customer"})]})]})]})};export{N as default};

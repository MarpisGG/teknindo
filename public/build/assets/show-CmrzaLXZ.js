import{r as a,K as g,j as e,$ as u,a as i}from"./app-eujjRd3E.js";import{S as r}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{A as N}from"./arrow-left-Cu1A5Jy1.js";import{B as y,M as v}from"./map-pin-B2sp5ZO6.js";import{L as w}from"./laptop-minimal-D9X-3OXc.js";import{S,T as C}from"./trash-2-BPKd_eTk.js";import"./createLucideIcon-DnzOwBgV.js";const $=()=>{const[t,h]=a.useState(null),[b,n]=a.useState(!0),[m,o]=a.useState(null),{slug:d}=g().props,c=async()=>{if(!d){o("No job identifier found"),n(!1);return}try{n(!0),o(null);const s=await i.get(`/api/jobs/${d}`);h(s.data)}catch(s){console.error("Failed to load job:",s),o("Failed to load job details"),r.fire("Error","Failed to load job details.","error")}finally{n(!1)}};a.useEffect(()=>{c()},[d]);const j=async()=>{if(!t)return;if((await r.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await i.delete(`/jobs/${t.id}`),r.fire("Deleted!","Job has been deleted.","success"),window.location.href="/jobs"}catch(l){console.error("Delete error:",l),r.fire("Error!","There was an error deleting the job.","error")}},p=async s=>{if((await r.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await i.delete(`/applicants/${s}`),r.fire("Deleted!","Applicant has been deleted.","success"),c()}catch(x){console.error("Delete applicant error:",x),r.fire("Error!","There was an error deleting the applicant.","error")}};return b?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-pulse text-xl",children:"Loading job..."})}):m?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-red-50",children:e.jsx("div",{className:"text-xl text-red-700",children:m})}):t?e.jsx("div",{className:"jobs container mx-auto px-4 py-10",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsxs(u,{href:"/admin/jobs",className:"mb-6 inline-flex items-center text-sm text-blue-600 hover:underline",children:[e.jsx(N,{size:16,className:"mr-1"}),"Back to Jobs"]}),e.jsx("article",{className:"overflow-hidden rounded-2xl bg-white shadow-lg",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"mb-2 text-4xl font-extrabold text-gray-900",children:t.title}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-2 text-sm",children:[e.jsxs("span",{className:"rounded-full bg-blue-100 px-3 py-1 text-blue-800",children:[e.jsx(y,{size:16,className:"mr-1 inline"}),t.division]}),e.jsxs("span",{className:"rounded-full bg-green-100 px-3 py-1 text-green-800",children:[e.jsx(v,{size:16,className:"mr-1 inline"}),t.location]}),e.jsxs("span",{className:"rounded-full bg-purple-100 px-3 py-1 text-purple-800",children:[e.jsx(w,{size:16,className:"mr-1 inline"}),t.type]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold text-gray-900",children:"Job Description"}),e.jsx("div",{className:"prose prose-ul:list-disc prose-ol:list-decimal max-w-none leading-relaxed text-gray-700",dangerouslySetInnerHTML:{__html:t.job_desc||""}})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold text-gray-900",children:"Requirements"}),e.jsx("div",{className:"prose prose-ul:list-disc prose-ol:list-decimal max-w-none leading-relaxed text-gray-700",dangerouslySetInnerHTML:{__html:t.requirements||""}})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-3 text-2xl font-bold text-gray-900",children:"Benefits"}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("div",{className:"list-inside list-disc space-y-1 leading-relaxed text-gray-700",dangerouslySetInnerHTML:{__html:t.benefit||""}})})]})]}),t.applicants&&e.jsxs("div",{className:"mt-10",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold text-gray-900",children:"Applicants"}),t.applicants.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.applicants.map(s=>e.jsxs("div",{className:"rounded border border-gray-200 bg-white p-4 shadow-sm transition hover:shadow-md",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-md",children:[e.jsx("span",{className:"font-bold",children:"Email :"})," ",s.email]}),e.jsxs("p",{className:"text-md",children:[e.jsx("span",{className:"font-bold",children:"Phone :"})," ",s.phone]}),e.jsxs("p",{className:"text-md",children:[e.jsx("span",{className:"font-bold",children:"Education :"})," ",s.education]}),e.jsxs("p",{className:"text-md",children:[e.jsx("span",{className:"font-bold",children:"Address :"})," ",s.address]}),e.jsxs("p",{className:"text-md",children:["Expected Salary :"," ",s.expected_salary?`Rp ${Number(s.expected_salary).toLocaleString("id-ID")}`:"Not specified"]}),e.jsxs("p",{className:"text-md",children:["Start Date :"," ",s.start_date?new Date(s.start_date).toLocaleDateString("id-ID"):"-"]}),e.jsxs("div",{className:"text-md mt-2",children:["Resume :"," ",s.resume?e.jsx("a",{href:`/storage/${s.resume}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View CV"}):e.jsx("span",{className:"text-gray-400 italic",children:"No file"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[e.jsxs("select",{value:s.status,onChange:async l=>{const x=l.target.value;try{await i.patch(`/applicants/${s.id}/status`,{status:x}),c()}catch(f){console.error("Failed to update status:",f),r.fire("Error","Failed to update status","error")}},className:`w-full rounded border px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#FCC200] focus:outline-none ${s.status==="Applied"?"border-green-200 bg-green-100 text-green-800":s.status==="Under Review"?"border-yellow-200 bg-yellow-100 text-yellow-800":s.status==="Interview Scheduled"?"border-blue-200 bg-blue-100 text-blue-800":s.status==="Hired"?"border-emerald-200 bg-emerald-100 text-emerald-800":"border-red-200 bg-red-100 text-red-800"}`,children:[e.jsx("option",{value:"Applied",children:"Applied"}),e.jsx("option",{value:"Under Review",children:"Under Review"}),e.jsx("option",{value:"Interview Scheduled",children:"Interview Scheduled"}),e.jsx("option",{value:"Hired",children:"Hired"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]}),e.jsx("button",{onClick:()=>p(s.id),className:"ml-2 rounded bg-red-500 px-3 py-1.5 text-sm text-white hover:bg-red-600",children:"Delete"})]})]},s.id))}):e.jsx("p",{className:"",children:"No applicants have applied for this job yet."})]}),e.jsxs("div",{className:"mt-10 flex justify-start gap-4 border-t border-gray-200 pt-6",children:[e.jsxs(u,{href:`/admin/jobs/${t.id}/edit`,className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700",children:[e.jsx(S,{size:18}),"Edit"]}),e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-white transition-colors hover:bg-red-700",children:[e.jsx(C,{size:18}),"Delete"]})]})]})})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("div",{className:"text-xl",children:"Job not found."})})};export{$ as default};

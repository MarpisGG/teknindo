import{K as P,r as l,j as e,a as k,S as D}from"./app-pfnbfUcP.js";import{R as v}from"./index-Bb09ojIW.js";import{S as y}from"./sweetalert2.esm.all-BQIkj5Wb.js";const L=()=>{const{categories:N,types:C}=P().props,[r,n]=l.useState({name:"",description:"",specifications:"",brochure:null,image:null,poster:null,category_id:0,type_id:0}),[a,x]=l.useState({}),[d,u]=l.useState(!1),[h,g]=l.useState(null),[f,b]=l.useState(null),[j,w]=l.useState(null),m=s=>{const{name:t,value:i}=s.target;n(c=>({...c,[t]:i}))},p=s=>{const{name:t,files:i}=s.target;if(i&&i.length>0){const c=i[0];n(o=>({...o,[t]:c})),t==="image"&&g(URL.createObjectURL(c)),t==="brochure"&&w(c.name),t==="poster"&&b(URL.createObjectURL(c))}},S=async s=>{var i,c;s.preventDefault(),u(!0),x({});const t=new FormData;t.append("name",r.name),t.append("description",r.description),t.append("specifications",r.specifications),t.append("category_id",r.category_id.toString()),t.append("type_id",r.type_id.toString()),r.brochure&&t.append("brochure",r.brochure),r.image&&t.append("image",r.image),r.poster&&t.append("poster",r.poster);try{await k.post("/products",t),y.fire("Success","Product created successfully","success"),D.get("/admin/products")}catch(o){(c=(i=o.response)==null?void 0:i.data)!=null&&c.errors?x(o.response.data.errors):y.fire("Error","Something went wrong","error")}finally{u(!1)}};return e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsx("h1",{className:"mb-6 text-2xl font-bold",children:"Create Product"}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:r.name,onChange:m,className:"w-full rounded border px-4 py-2"}),a.name&&e.jsx("div",{className:"text-sm text-red-600",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Description"}),e.jsx(v,{value:r.description,onChange:s=>n(t=>({...t,description:s})),className:"bg-white"}),a.description&&e.jsx("div",{className:"text-sm text-red-600",children:a.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Specifications"}),e.jsx(v,{value:r.specifications,onChange:s=>n(t=>({...t,specifications:s})),className:"bg-white"}),a.specifications&&e.jsx("div",{className:"text-sm text-red-600",children:a.specifications})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Category"}),e.jsxs("select",{name:"category_id",value:r.category_id,onChange:m,className:"w-full rounded border px-4 py-2",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),N.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.category_id&&e.jsx("div",{className:"text-sm text-red-600",children:a.category_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Type"}),e.jsxs("select",{name:"type_id",value:r.type_id,onChange:m,className:"w-full rounded border px-4 py-2",children:[e.jsx("option",{value:"",children:"-- Select Type --"}),C.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),a.type_id&&e.jsx("div",{className:"text-sm text-red-600",children:a.type_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Brochure (PDF)"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var s;return(s=document.getElementById("brochure-input"))==null?void 0:s.click()},children:[e.jsx("input",{id:"brochure-input",type:"file",name:"brochure",accept:".pdf",onChange:p,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop a PDF here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"Max file 5MB"}),j&&e.jsx("p",{className:"mt-2 text-gray-700",children:j})]}),a.brochure&&e.jsx("div",{className:"text-sm text-red-600",children:a.brochure})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Image"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var s;return(s=document.getElementById("image-input"))==null?void 0:s.click()},onDragOver:s=>{s.preventDefault()},onDrop:s=>{if(s.preventDefault(),s.dataTransfer.files.length>0){const t=s.dataTransfer.files[0];n(i=>({...i,image:t})),g(URL.createObjectURL(t))}},children:[e.jsx("input",{id:"image-input",type:"file",name:"image",accept:"image/*",onChange:p,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop an image here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),h&&e.jsx("img",{src:h,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),a.image&&e.jsx("div",{className:"text-sm text-red-600",children:a.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium",children:"Poster"}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed bg-gray-50 p-6 hover:border-blue-400",onClick:()=>{var s;return(s=document.getElementById("poster-input"))==null?void 0:s.click()},onDragOver:s=>{s.preventDefault()},onDrop:s=>{if(s.preventDefault(),s.dataTransfer.files.length>0){const t=s.dataTransfer.files[0];n(i=>({...i,poster:t})),b(URL.createObjectURL(t))}},children:[e.jsx("input",{id:"poster-input",type:"file",name:"poster",accept:"image/*",onChange:p,className:"hidden"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Click or drag & drop a poster here"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"PNG, JPG up to 5MB"}),f&&e.jsx("img",{src:f,alt:"Preview",className:"mt-4 h-24 rounded object-cover shadow"})]}),a.poster&&e.jsx("div",{className:"text-sm text-red-600",children:a.poster})]}),e.jsx("div",{className:"flex justify-start space-x-3 pt-4",children:e.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 ${d?"bg-blue-300":"bg-blue-600 hover:bg-blue-700"} rounded-md text-white`,children:d?"Creating...":"Create Product"})})]})]})};export{L as default};

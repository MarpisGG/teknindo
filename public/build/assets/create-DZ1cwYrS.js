import{r as o,j as e,S as u}from"./app-td-2yHtZ.js";import{R as y}from"./index-Dw6v4FRt.js";const N=()=>{const[c,x]=o.useState(""),[i,b]=o.useState(null),[l,r]=o.useState([]),m=s=>{r([...l,{type:s,content:"",image:null}])},g=s=>{const t=[...l];t.splice(s,1),r(t)},d=(s,t)=>{const a=[...l],n=t==="up"?s-1:s+1;n<0||n>=a.length||([a[s],a[n]]=[a[n],a[s]],r(a))},p=(s,t,a)=>{const n=[...l];a==="text"?n[s].content=t:n[s].image=t,r(n)},h=async s=>{s.preventDefault();const t=new FormData;t.append("title",c),i&&t.append("thumbnail",i),l.forEach((a,n)=>{t.append(`contents[${n}][type]`,a.type),a.type==="text"&&t.append(`contents[${n}][content]`,a.content||""),a.type==="image"&&a.image&&t.append(`contents[${n}][image]`,a.image),t.append(`contents[${n}][order]`,String(n))}),await u.post("/blogs",t,{forceFormData:!0})};return e.jsxs("div",{className:"mx-auto max-w-3xl p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("button",{type:"button",onClick:()=>u.get("/admin/blogs"),className:"inline-flex items-center rounded-lg border border-gray-300 px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("span",{className:"mr-2",children:"←"}),"Back"]})}),e.jsx("h2",{className:"mb-6 text-3xl font-bold",children:"Create Blog"}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Title"}),e.jsx("input",{type:"text",value:c,onChange:s=>x(s.target.value),className:"w-full rounded border border-gray-300 p-2 focus:border-black focus:ring-black",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Thumbnail (optional)"}),e.jsx("input",{type:"file",onChange:s=>{var t;return b(((t=s.target.files)==null?void 0:t[0])||null)},className:"w-full rounded border border-gray-300 p-2"})]}),e.jsx("p",{className:"mb-4 text-sm text-red-500",children:"Image must be 2048KB (2MB) or smaller."}),e.jsx("div",{className:"space-y-6",children:l.map((s,t)=>e.jsxs("div",{className:"rounded-xl border border-gray-300 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium capitalize",children:[s.type," Block"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>d(t,"up"),className:"text-sm text-gray-500 hover:text-black",children:"↑"}),e.jsx("button",{type:"button",onClick:()=>d(t,"down"),className:"text-sm text-gray-500 hover:text-black",children:"↓"}),e.jsx("button",{type:"button",onClick:()=>g(t),className:"text-sm text-red-500 hover:text-red-700",children:"Remove"})]})]}),s.type==="text"&&e.jsx(y,{value:s.content||"",onChange:a=>p(t,a,"text"),className:"bg-white",theme:"snow",placeholder:"Write your text here..."}),s.type==="image"&&e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var n;return p(t,((n=a.target.files)==null?void 0:n[0])||null,"image")},className:"w-full rounded border border-gray-300 p-2"})]},t))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m("text"),className:"rounded-lg bg-blue-500 px-4 py-2 text-white transition hover:bg-blue-600",children:"+ Text Block"}),e.jsx("button",{type:"button",onClick:()=>m("image"),className:"rounded-lg bg-green-500 px-4 py-2 text-white transition hover:bg-green-600",children:"+ Image Block"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-lg bg-black px-6 py-3 font-semibold text-white transition hover:bg-gray-900",children:"Create Blog"})]})]})};export{N as default};
